<?xml version="1.0" encoding="UTF-8"?>
<chapter id="faq">
	<title>FAQ</title>

	<section id="">
		<title>Error: etherbase missing: etherbase address must be explicitly	specified</title>
		<screen>
		<![CDATA[
ERROR[02-10|16:12:45] Cannot start mining without etherbase    err="etherbase address must be explicitly specified"
Error: etherbase missing: etherbase address must be explicitly specified
    at web3.js:3143:20
    at web3.js:6347:15
    at web3.js:5081:36
    at <anonymous>:1:1		
		]]>
		</screen>
		<para>原因是当前环境没有账户，需要建立一个账户</para>
		<screen>
		<![CDATA[
> personal.newAccount("chen")
"0x1b94732fca6f62a4f74fb2f7c80bfc89d567fdfb"
		]]>
		</screen>
		<para>现在启动挖矿就不会出现问题了</para>
	</section>
	<section id="faq">
		<title>FAQ</title>
	</section>
	<section id="faq.unlock">
		<title>Error: authentication needed: password or unlock</title>
		<screen>
			<![CDATA[
> eth.sendTransaction({from: '0x83fda0ba7e6cfa8d7319d78fa0e6b753a2bcb5a6', to: '0xe8abf98484325fd6afc59b804ac15804b978e607', value: web3.toWei(1, "ether")})
Error: authentication needed: password or unlock
    at web3.js:3143:20
    at web3.js:6347:15
    at web3.js:5081:36
    at <anonymous>:1:1			
			]]>
		</screen>
		<para>解锁转出账号</para>
		<screen>
			<![CDATA[
> personal.unlockAccount("0x83fda0ba7e6cfa8d7319d78fa0e6b753a2bcb5a6", "your_password", 300)
true
> eth.sendTransaction({from: '0x83fda0ba7e6cfa8d7319d78fa0e6b753a2bcb5a6', to: '0xe8abf98484325fd6afc59b804ac15804b978e607', value: web3.toWei(1, "ether")})
"0xd9e8c8fdc71e24ee8052048de4ff0acd7157b872393f37344c8ec2083f3fe48f"			
			]]>
		</screen>
	</section>
	<section id="faq.add.node">
		<title>新增节点后不生效</title>
		<para>新增节点显示 true ,但是使用 admin.peers 查看不到。</para>
		<screen>
			<![CDATA[
> admin.addPeer("enode://c4586276391b3c88ec23889d1bc825d0c7d69bd5765d4545686f835608068b8dc48799d2686a04ea0f9e17aed099bf9b56935679fa6493e9b17151624a320714@172.16.0.17:30303")
true
> admin.peers
[]			
			]]>
		</screen>

		<para>查看节点，如果发现 ip: "::" 同时 discovery: 0</para>
		<screen>
			<![CDATA[
> admin.nodeInfo
{
  enode: "enode://9f6490ffb5236f2ddc5710ae73d47c740e0a3644bbd2d67029cf4a6c4693d2f470b642fd2cc3507f7e851df60aaeb730a1270b7a477f91ec5b6b17a8a4b40527@[::]:30303?discport=0",
  id: "9f6490ffb5236f2ddc5710ae73d47c740e0a3644bbd2d67029cf4a6c4693d2f470b642fd2cc3507f7e851df60aaeb730a1270b7a477f91ec5b6b17a8a4b40527",
  ip: "::",
  listenAddr: "[::]:30303",
  name: "Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9.1",
  ports: {
    discovery: 0,
    listener: 30303
  },
  protocols: {
    eth: {
      difficulty: 131072,
      genesis: "0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04",
      head: "0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04",
      network: 123456
    }
  }
}
> 
			]]>
		</screen>

		<para>解决方案启动时可能增加了 --nodiscover 参数，去掉参数后可以解决。</para>

		<para>有三种方法新增节点</para>
		<para>第一种，启动指定</para>
		<screen>
			<![CDATA[
geth --bootnodes enode://pubkey1@ip1:port1,enode://pubkey2@ip2:port2,enode://pubkey3@ip3:port3
			]]>
		</screen>
		<para>第二种，在控制台中添加</para>
		<screen>
			<![CDATA[
> admin.addPeer('enode://9f6490ffb5236f2ddc5710ae73d47c740e0a3644bbd2d67029cf4a6c4693d2f470b642fd2cc3507f7e851df60aaeb730a1270b7a477f91ec5b6b17a8a4b40527@172.16.0.1:30303')				
			]]>
		</screen>
		<para>第三种，在文件 ~/.ethereum/geth/static-nodes.json 中添加节点数据</para>
		<screen>
			<![CDATA[
[
  "enode://9f6490ffb5236f2ddc5710ae73d47c740e0a3644bbd2d67029cf4a6c4693d2f470b642fd2cc3507f7e851df60aaeb730a1270b7a477f91ec5b6b17a8a4b40527@172.16.0.17:30303",
  "enode://pubkey@ip:port"
]
			]]>
		</screen>
		<para>这个文件内容是一个数组，类似 ["","",""] 。</para>
	</section>

</chapter>